#!/bin/bash

# ================= BANNER (UNCHANGED) =================
banners=("

 ‚ñÑ‚ñÑ‚ñÑ       ‚ñà‚ñà‚ñà‚ñÑ    ‚ñà  ‚ñí‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñÑ    ‚ñà  ‚ñà‚ñà‚ñì  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñí‚ñì‚ñà‚ñà   ‚ñà‚ñà‚ñì
‚ñí‚ñà‚ñà‚ñà‚ñà‚ñÑ     ‚ñà‚ñà ‚ñÄ‚ñà   ‚ñà ‚ñí‚ñà‚ñà‚ñí  ‚ñà‚ñà‚ñí ‚ñà‚ñà ‚ñÄ‚ñà   ‚ñà ‚ñì‚ñà‚ñà‚ñí‚ñì‚ñà‚ñà   ‚ñí  ‚ñí‚ñà‚ñà  ‚ñà‚ñà‚ñí
‚ñí‚ñà‚ñà  ‚ñÄ‚ñà‚ñÑ  ‚ñì‚ñà‚ñà  ‚ñÄ‚ñà ‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñë  ‚ñà‚ñà‚ñí‚ñì‚ñà‚ñà  ‚ñÄ‚ñà ‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñà‚ñà ‚ñë   ‚ñí‚ñà‚ñà ‚ñà‚ñà‚ñë
‚ñë‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà ‚ñì‚ñà‚ñà‚ñí  ‚ñê‚ñå‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà   ‚ñà‚ñà‚ñë‚ñì‚ñà‚ñà‚ñí  ‚ñê‚ñå‚ñà‚ñà‚ñí‚ñë‚ñà‚ñà‚ñë‚ñë‚ñì‚ñà‚ñí  ‚ñë   ‚ñë ‚ñê‚ñà‚ñà‚ñì‚ñë
 ‚ñì‚ñà   ‚ñì‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñë   ‚ñì‚ñà‚ñà‚ñë‚ñë ‚ñà‚ñà‚ñà‚ñà‚ñì‚ñí‚ñë‚ñí‚ñà‚ñà‚ñë   ‚ñì‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñë‚ñë‚ñí‚ñà‚ñë      ‚ñë ‚ñà‚ñà‚ñí‚ñì‚ñë
 ‚ñí‚ñí   ‚ñì‚ñí‚ñà‚ñë‚ñë ‚ñí‚ñë   ‚ñí ‚ñí ‚ñë ‚ñí‚ñë‚ñí‚ñë‚ñí‚ñë ‚ñë ‚ñí‚ñë   ‚ñí ‚ñí ‚ñë‚ñì   ‚ñí ‚ñë       ‚ñà‚ñà‚ñí‚ñí‚ñí 
  ‚ñí   ‚ñí‚ñí ‚ñë‚ñë ‚ñë‚ñë   ‚ñë ‚ñí‚ñë  ‚ñë ‚ñí ‚ñí‚ñë ‚ñë ‚ñë‚ñë   ‚ñë ‚ñí‚ñë ‚ñí ‚ñë ‚ñë       ‚ñì‚ñà‚ñà ‚ñë‚ñí‚ñë 
  ‚ñë   ‚ñí      ‚ñë   ‚ñë ‚ñë ‚ñë ‚ñë ‚ñë ‚ñí     ‚ñë   ‚ñë ‚ñë  ‚ñí ‚ñë ‚ñë ‚ñë     ‚ñí ‚ñí ‚ñë‚ñë  
      ‚ñë  ‚ñë         ‚ñë     ‚ñë ‚ñë           ‚ñë  ‚ñë           ‚ñë ‚ñë     
                                                      ‚ñë ‚ñë     
                ùôãùô™ùôßùôûùôõùôÆ ùôÆùô§ùô™ùôß ùôùùôöùôñùôßùô© , ùôãùôñùô©ùôûùôöùô£ùôòùôö ùôûùô® ùô°ùôûùôúùôùùô©!                       
                                               ùóßùóºùóºùóπ-ùóØùòÜ "ùó≠-ùóóùóøùü¨ùó∂ùó±"    
                                              
                                                D:)  16/12/2025 "

)

############################
# GLOBAL CONFIG
############################
ROTATE_INTERVAL=300            # seconds
MAC_ROTATE_INTERVAL=1          # seconds
LOG_DIR="/var/log/anonify"
PROXY_CONF="/etc/proxychains4.conf"
TZ="UTC"

mkdir -p "$LOG_DIR"

############################
# ROOT CHECK
############################
[[ $EUID -ne 0 ]] && echo "[!] Run as root" && exit 1

############################
# TIME SYNC (GMT)
############################
timedatectl set-timezone "$TZ"
timedatectl set-ntp true

START_TIME=$(date -u +"%Y-%m-%d %H:%M:%S GMT")

############################
# DEPENDENCIES
############################
apt update -y >/dev/null
apt install -y macchanger tor proxychains4 net-tools xterm >/dev/null

############################
# ENV DETECTION (VMWARE FIRST)
############################
if systemd-detect-virt | grep -qi vmware; then
  ENV="VMWARE"
else
  ENV="OTHER"
fi

############################
# INTERFACE DETECTION
############################
INTERFACE=$(ip -o link show | awk -F': ' '/ens|eth/{print $2; exit}')
[[ -z "$INTERFACE" ]] && echo "[!] No interface found" && exit 1

############################
# PROXYCHAINS (STRICT)
############################
configure_proxychains() {
  sed -i 's/^dynamic_chain/#dynamic_chain/' $PROXY_CONF
  sed -i 's/^#strict_chain/strict_chain/' $PROXY_CONF
  sed -i 's/^#proxy_dns/proxy_dns/' $PROXY_CONF
  sed -i 's/^#socks5 127.0.0.1 9050/socks5 127.0.0.1 9050/' $PROXY_CONF
}

############################
# TOR
############################
systemctl restart tor
sleep 3

############################
# IP + FINGERPRINT ROTATION
############################
rotate_fingerprint() {
  echo "[+] Rotating fingerprint @ $(date -u +"%H:%M:%S GMT")"
  ifconfig "$INTERFACE" down
  macchanger -r "$INTERFACE" >> "$LOG_DIR/mac.log"
  ifconfig "$INTERFACE" up
  dhclient "$INTERFACE" >> "$LOG_DIR/ip.log"
  ip -6 addr flush dev "$INTERFACE"
}

############################
# SEPARATE MAC ROTATION TERMINAL
############################
mac_daemon() {
  while true; do
    ifconfig "$INTERFACE" down
    macchanger -r "$INTERFACE" >> "$LOG_DIR/mac-live.log"
    ifconfig "$INTERFACE" up
    sleep $MAC_ROTATE_INTERVAL
  done
}

############################
# UI DASHBOARD
############################
ui() {
  clear
  echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
  echo "   ANONIFY v2 ‚Äî VMware Hardened"
  echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
  echo " Environment     : $ENV"
  echo " Interface       : $INTERFACE"
  echo " Time (GMT)      : $(date -u)"
  echo " Rotate Interval : ${ROTATE_INTERVAL}s"
  echo " Proxy Mode      : STRICT (Tor)"
  echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
}

############################
# START
############################
configure_proxychains
ui

echo "[*] Starting isolated MAC daemon..."
xterm -hold -title "AnoniFY MAC Engine" -e bash -c "$(declare -f mac_daemon); mac_daemon" &

############################
# MAIN LOOP (VERBOSE TIMER)
############################
while true; do
  rotate_fingerprint
  for ((i=$ROTATE_INTERVAL; i>0; i--)); do
    printf "\r[‚è≥] Next fingerprint in %02ds (GMT synced) " "$i"
    sleep 1
  done
  echo
done

