#!/bin/bash

# ================= BANNER (UNCHANGED) =================
banners=("

 â–„â–„â–„       â–ˆâ–ˆâ–ˆâ–„    â–ˆ  â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–„    â–ˆ  â–ˆâ–ˆâ–“  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–“â–ˆâ–ˆ   â–ˆâ–ˆâ–“
â–’â–ˆâ–ˆâ–ˆâ–ˆâ–„     â–ˆâ–ˆ â–€â–ˆ   â–ˆ â–’â–ˆâ–ˆâ–’  â–ˆâ–ˆâ–’ â–ˆâ–ˆ â–€â–ˆ   â–ˆ â–“â–ˆâ–ˆâ–’â–“â–ˆâ–ˆ   â–’  â–’â–ˆâ–ˆ  â–ˆâ–ˆâ–’
â–’â–ˆâ–ˆ  â–€â–ˆâ–„  â–“â–ˆâ–ˆ  â–€â–ˆ â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–‘  â–ˆâ–ˆâ–’â–“â–ˆâ–ˆ  â–€â–ˆ â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆ â–‘   â–’â–ˆâ–ˆ â–ˆâ–ˆâ–‘
â–‘â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–ˆ â–“â–ˆâ–ˆâ–’  â–â–Œâ–ˆâ–ˆâ–’â–’â–ˆâ–ˆ   â–ˆâ–ˆâ–‘â–“â–ˆâ–ˆâ–’  â–â–Œâ–ˆâ–ˆâ–’â–‘â–ˆâ–ˆâ–‘â–‘â–“â–ˆâ–’  â–‘   â–‘ â–â–ˆâ–ˆâ–“â–‘
 â–“â–ˆ   â–“â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–‘   â–“â–ˆâ–ˆâ–‘â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–’â–ˆâ–ˆâ–‘   â–“â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–‘â–‘â–’â–ˆâ–‘      â–‘ â–ˆâ–ˆâ–’â–“â–‘
 â–’â–’   â–“â–’â–ˆâ–‘â–‘ â–’â–‘   â–’ â–’ â–‘ â–’â–‘â–’â–‘â–’â–‘ â–‘ â–’â–‘   â–’ â–’ â–‘â–“   â–’ â–‘       â–ˆâ–ˆâ–’â–’â–’ 
  â–’   â–’â–’ â–‘â–‘ â–‘â–‘   â–‘ â–’â–‘  â–‘ â–’ â–’â–‘ â–‘ â–‘â–‘   â–‘ â–’â–‘ â–’ â–‘ â–‘       â–“â–ˆâ–ˆ â–‘â–’â–‘ 
  â–‘   â–’      â–‘   â–‘ â–‘ â–‘ â–‘ â–‘ â–’     â–‘   â–‘ â–‘  â–’ â–‘ â–‘ â–‘     â–’ â–’ â–‘â–‘  
      â–‘  â–‘         â–‘     â–‘ â–‘           â–‘  â–‘           â–‘ â–‘     
                                                      â–‘ â–‘     
                ð™‹ð™ªð™§ð™žð™›ð™® ð™®ð™¤ð™ªð™§ ð™ð™šð™–ð™§ð™© , ð™‹ð™–ð™©ð™žð™šð™£ð™˜ð™š ð™žð™¨ ð™¡ð™žð™œð™ð™©!                       
                                               ð—§ð—¼ð—¼ð—¹-ð—¯ð˜† "ð—­-ð——ð—¿ðŸ¬ð—¶ð—±"    
                                              
                                                D:)  16/12/2025 "
)

# ================= ROOT CHECK =================
if [[ $EUID -ne 0 ]]; then
  echo "[!] Run as root"
  exit 1
fi

# ================= DEPENDENCIES =================
apt update -y
apt install -y macchanger isc-dhcp-client proxychains4 net-tools tor

# ================= WHERE AM I (VM OR REAL) =================
if systemd-detect-virt | grep -qi vmware; then
  ENVIRONMENT="VMWARE"
elif systemd-detect-virt | grep -qi oracle; then
  ENVIRONMENT="VIRTUALBOX"
elif systemd-detect-virt | grep -qi kvm; then
  ENVIRONMENT="KVM"
else
  ENVIRONMENT="BAREMETAL"
fi

echo "[*] Environment detected: $ENVIRONMENT"

# ================= INTERFACE DETECTION =================
if [[ "$ENVIRONMENT" == "BAREMETAL" ]]; then
  INTERFACE=$(ip link | awk -F: '/wl/{print $2; exit}' | tr -d ' ')
else
  INTERFACE=$(ip link | awk -F: '/e(n|th)/{print $2; exit}' | tr -d ' ')
  echo "[!] VM detected: MAC change affects VM only, not host Wi-Fi"
fi

if [[ -z "$INTERFACE" ]]; then
  echo "[!] No network interface found"
  exit 1
fi

echo "[*] Using interface: $INTERFACE"

# ================= FUNCTIONS =================

renew_ip() {
  if command -v dhclient >/dev/null 2>&1; then
    dhclient -v "$INTERFACE"
  elif command -v nmcli >/dev/null 2>&1; then
    nmcli device disconnect "$INTERFACE"
    nmcli device connect "$INTERFACE"
  elif command -v udhcpc >/dev/null 2>&1; then
    udhcpc -i "$INTERFACE"
  else
    echo "[!] No DHCP client found"
    exit 1
  fi
}

change_network_identifiers() {
  ifconfig "$INTERFACE" down
  macchanger -r "$INTERFACE"
  ifconfig "$INTERFACE" up

  renew_ip
  ip -6 addr flush dev "$INTERFACE"
}

start_anonsurf() {
  if command -v anonsurf >/dev/null 2>&1; then
    anonsurf start
  else
    systemctl start tor
  fi
}

configure_proxychains() {
  sed -i 's/^#dynamic_chain/dynamic_chain/' /etc/proxychains4.conf
  sed -i 's/^#chain_len/chain_len/' /etc/proxychains4.conf
  sed -i 's/^#socks5 127.0.0.1 9050/socks5 127.0.0.1 9050/' /etc/proxychains4.conf
}

show_random_banner() {
  clear
  echo -e "\e[32m${banners[$RANDOM % ${#banners[@]}]}\e[0m"
}

# ================= MAIN =================
show_random_banner
configure_proxychains
start_anonsurf

while true; do
  change_network_identifiers
  sleep 302
done

